# üöÄ SpaceAPSS - Vis√£o Geral do Projeto

## üìå Resumo Executivo

**SpaceAPSS** (Space Applied Science Search System) √© um sistema de **busca e resposta inteligente** sobre artigos cient√≠ficos relacionados a pesquisas espaciais, utilizando t√©cnicas de **RAG (Retrieval-Augmented Generation)** e **IA generativa**.

O projeto permite que usu√°rios fa√ßam perguntas em linguagem natural e recebam respostas contextualizadas baseadas em uma base de dados de artigos cient√≠ficos do PubMed/PMC sobre medicina espacial, microbiologia, efeitos da microgravidade, e outros t√≥picos relacionados.

---

## üèóÔ∏è Arquitetura do Sistema

### Stack Tecnol√≥gico

#### **Backend (agents/)**
- **FastAPI** - Framework web ass√≠ncrono
- **ChromaDB** - Banco de dados vetorial para embeddings
- **Google Gemini 2.0 Flash** - LLM para gera√ß√£o de respostas
- **Text Embedding 004** - Modelo de embeddings do Google
- **Redis** - Cache e gerenciamento de sess√µes
- **BeautifulSoup4 + Readability** - Extra√ß√£o de conte√∫do web
- **NCBI E-utilities API** - Busca de artigos cient√≠ficos

#### **Frontend (front/)**
- **React + TypeScript** - Interface do usu√°rio
- **Vite** - Build tool e dev server
- **TailwindCSS** - Estiliza√ß√£o
- **Axios** - Cliente HTTP

### Componentes Principais

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     FRONTEND (React)                         ‚îÇ
‚îÇ  - Interface de chat                                         ‚îÇ
‚îÇ  - Visualiza√ß√£o de artigos                                   ‚îÇ
‚îÇ  - Listagem de fontes                                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ HTTP/REST
                 ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   BACKEND API (FastAPI)                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ              Routers (Endpoints)                     ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  - /health   - /chat   - /articles                   ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                     ‚ñº                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ           Agent Pipeline (RAG)                       ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  1. Recebe pergunta                                  ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  2. Retrieval (busca sem√¢ntica)                      ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  3. S√≠ntese com LLM                                  ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  4. Retorna resposta + fontes                        ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                     ‚îÇ                                         ‚îÇ
‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                        ‚îÇ
‚îÇ     ‚ñº                               ‚ñº                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
‚îÇ  ‚îÇ  Retriever  ‚îÇ              ‚îÇ Google Gemini ‚îÇ              ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
‚îÇ         ‚îÇ                                                     ‚îÇ
‚îÇ         ‚ñº                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                     ‚îÇ
‚îÇ  ‚îÇ  VectorDBManager    ‚îÇ                                     ‚îÇ
‚îÇ  ‚îÇ    (ChromaDB)       ‚îÇ                                     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚ñ≤
                 ‚îÇ Processamento em lote
                 ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              EXTRA√á√ÉO DE DADOS (proccess_batch.py)          ‚îÇ
‚îÇ  - L√™ CSV com links de artigos                              ‚îÇ
‚îÇ  - Extrai conte√∫do via NCBI API                              ‚îÇ
‚îÇ  - Gera embeddings                                           ‚îÇ
‚îÇ  - Armazena no ChromaDB                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîÑ Pipeline Completa - Fluxo Detalhado

### **FASE 1: Ingest√£o de Dados (Offline)**

#### 1.1 Processamento em Lote (`proccess_batch.py`)

```
CSV Input
   ‚Üì
[SB_publication_PMC.csv]
   ‚îÇ
   ‚îÇ Para cada artigo:
   ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. Extra√ß√£o de Conte√∫do              ‚îÇ
‚îÇ    - Identifica PMC ID da URL        ‚îÇ
‚îÇ    - Busca via NCBI E-utilities API  ‚îÇ
‚îÇ    - Extrai abstract + conte√∫do      ‚îÇ
‚îÇ    - Fallback: scraping HTML/PDF     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 2. Sectioniza√ß√£o                     ‚îÇ
‚îÇ    - Divide em se√ß√µes l√≥gicas        ‚îÇ
‚îÇ    - Identifica: Abstract, Intro,    ‚îÇ
‚îÇ      Methods, Results, Discussion    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 3. Armazenamento Vetorial            ‚îÇ
‚îÇ    - Gera embedding do conte√∫do      ‚îÇ
‚îÇ    - Armazena no ChromaDB            ‚îÇ
‚îÇ    - Salva metadata: title, URL, ID  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚Üì
    [ChromaDB Collection]
    [extracted_data.jsonl]
```

**Detalhes T√©cnicos:**
- **Extrator**: `extract/extractor.py` + `extract/ncbi_fetcher.py`
- **API NCBI**: Usa `efetch.fcgi` com PMC ID para obter XML estruturado
- **Embeddings**: Gerados automaticamente pelo ChromaDB usando modelo configur√°vel
- **Tempo**: ~30-60 min para 600+ artigos

---

### **FASE 2: Consulta em Tempo Real (Online)**

#### 2.1 Fluxo de uma Pergunta do Usu√°rio

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ USU√ÅRIO                                                      ‚îÇ
‚îÇ "Quais s√£o os efeitos da microgravidade em c√©lulas humanas?"‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
                  ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ FRONTEND (ChatBox.tsx)                                       ‚îÇ
‚îÇ 1. Captura input                                             ‚îÇ
‚îÇ 2. Envia POST /chat                                          ‚îÇ
‚îÇ    Body: { "question": "...", "topK": 5 }                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ HTTP Request
                  ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ BACKEND - Router (/chat)                                     ‚îÇ
‚îÇ - Valida request                                             ‚îÇ
‚îÇ - Chama pipeline.answer()                                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ AGENT PIPELINE (pipeline.py)                                 ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ ETAPA 1: RETRIEVAL                                       ‚îÇ ‚îÇ
‚îÇ ‚îÇ                                                           ‚îÇ ‚îÇ
‚îÇ ‚îÇ retriever.retrieve_with_metadata(question, top_k=5)      ‚îÇ ‚îÇ
‚îÇ ‚îÇ   ‚Üì                                                       ‚îÇ ‚îÇ
‚îÇ ‚îÇ VectorDBManager.query_with_metadata()                    ‚îÇ ‚îÇ
‚îÇ ‚îÇ   ‚Üì                                                       ‚îÇ ‚îÇ
‚îÇ ‚îÇ ChromaDB:                                                ‚îÇ ‚îÇ
‚îÇ ‚îÇ   1. Gera embedding da pergunta                          ‚îÇ ‚îÇ
‚îÇ ‚îÇ   2. Busca similaridade cosine                           ‚îÇ ‚îÇ
‚îÇ ‚îÇ   3. Retorna top-k documentos mais similares             ‚îÇ ‚îÇ
‚îÇ ‚îÇ                                                           ‚îÇ ‚îÇ
‚îÇ ‚îÇ Retorno: Lista de dicts com:                             ‚îÇ ‚îÇ
‚îÇ ‚îÇ   - id: PMC ID do artigo                                 ‚îÇ ‚îÇ
‚îÇ ‚îÇ   - document: Conte√∫do completo                          ‚îÇ ‚îÇ
‚îÇ ‚îÇ   - title: T√≠tulo do artigo                              ‚îÇ ‚îÇ
‚îÇ ‚îÇ   - url: Link original                                   ‚îÇ ‚îÇ
‚îÇ ‚îÇ   - score: Relev√¢ncia (0-1)                              ‚îÇ ‚îÇ
‚îÇ ‚îÇ   - distance: Dist√¢ncia vetorial                         ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                   ‚Üì                                           ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ ETAPA 2: VERIFICA√á√ÉO                                     ‚îÇ ‚îÇ
‚îÇ ‚îÇ                                                           ‚îÇ ‚îÇ
‚îÇ ‚îÇ if docs_metadata is empty:                               ‚îÇ ‚îÇ
‚îÇ ‚îÇ   return fallback_answer                                 ‚îÇ ‚îÇ
‚îÇ ‚îÇ   (resposta gen√©rica sem contexto)                       ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                   ‚Üì                                           ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ ETAPA 3: PREPARA√á√ÉO DE CONTEXTO                          ‚îÇ ‚îÇ
‚îÇ ‚îÇ                                                           ‚îÇ ‚îÇ
‚îÇ ‚îÇ Formata documentos para s√≠ntese:                         ‚îÇ ‚îÇ
‚îÇ ‚îÇ   "Title: {title}\nContent: {content[:500]}..."          ‚îÇ ‚îÇ
‚îÇ ‚îÇ                                                           ‚îÇ ‚îÇ
‚îÇ ‚îÇ Constr√≥i prompt estruturado:                             ‚îÇ ‚îÇ
‚îÇ ‚îÇ   - Instru√ß√£o ao LLM                                     ‚îÇ ‚îÇ
‚îÇ ‚îÇ   - Contexto (documentos recuperados)                    ‚îÇ ‚îÇ
‚îÇ ‚îÇ   - Pergunta do usu√°rio                                  ‚îÇ ‚îÇ
‚îÇ ‚îÇ   - Diretrizes de resposta                               ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                   ‚Üì                                           ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ ETAPA 4: S√çNTESE COM LLM                                 ‚îÇ ‚îÇ
‚îÇ ‚îÇ                                                           ‚îÇ ‚îÇ
‚îÇ ‚îÇ Google Gemini 2.0 Flash:                                 ‚îÇ ‚îÇ
‚îÇ ‚îÇ   - Temperature: 0.3 (respostas mais determin√≠sticas)    ‚îÇ ‚îÇ
‚îÇ ‚îÇ   - Max tokens: 500                                      ‚îÇ ‚îÇ
‚îÇ ‚îÇ   - Modelo: gemini-2.0-flash                             ‚îÇ ‚îÇ
‚îÇ ‚îÇ                                                           ‚îÇ ‚îÇ
‚îÇ ‚îÇ LLM analisa contexto e gera resposta coerente            ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                   ‚Üì                                           ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ ETAPA 5: MONTAGEM DA RESPOSTA                            ‚îÇ ‚îÇ
‚îÇ ‚îÇ                                                           ‚îÇ ‚îÇ
‚îÇ ‚îÇ Cria objetos estruturados:                               ‚îÇ ‚îÇ
‚îÇ ‚îÇ                                                           ‚îÇ ‚îÇ
‚îÇ ‚îÇ sources: [SourceRef]                                     ‚îÇ ‚îÇ
‚îÇ ‚îÇ   - Lista de todos os artigos usados                     ‚îÇ ‚îÇ
‚îÇ ‚îÇ   - Com scores de relev√¢ncia                             ‚îÇ ‚îÇ
‚îÇ ‚îÇ                                                           ‚îÇ ‚îÇ
‚îÇ ‚îÇ article: Article                                         ‚îÇ ‚îÇ
‚îÇ ‚îÇ   - Artigo mais relevante (top-1)                        ‚îÇ ‚îÇ
‚îÇ ‚îÇ   - Com abstract, URL, metadata                          ‚îÇ ‚îÇ
‚îÇ ‚îÇ                                                           ‚îÇ ‚îÇ
‚îÇ ‚îÇ answer: string                                           ‚îÇ ‚îÇ
‚îÇ ‚îÇ   - Resposta sintetizada pelo LLM                        ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ RESPOSTA JSON                                                ‚îÇ
‚îÇ {                                                             ‚îÇ
‚îÇ   "answer": "A microgravidade afeta c√©lulas humanas...",     ‚îÇ
‚îÇ   "sources": [                                                ‚îÇ
‚îÇ     {                                                         ‚îÇ
‚îÇ       "id": "PMC1234567",                                     ‚îÇ
‚îÇ       "title": "Effects of microgravity...",                  ‚îÇ
‚îÇ       "score": 0.923,                                         ‚îÇ
‚îÇ       "url": "https://..."                                    ‚îÇ
‚îÇ     }                                                         ‚îÇ
‚îÇ   ],                                                          ‚îÇ
‚îÇ   "article": {                                                ‚îÇ
‚îÇ     "id": "PMC1234567",                                       ‚îÇ
‚îÇ     "title": "...",                                           ‚îÇ
‚îÇ     "abstract": "...",                                        ‚îÇ
‚îÇ     "metadata": {...}                                         ‚îÇ
‚îÇ   }                                                           ‚îÇ
‚îÇ }                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ HTTP Response
                  ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ FRONTEND - Renderiza√ß√£o                                      ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ 1. Exibe resposta do agente                                  ‚îÇ
‚îÇ 2. Lista fontes com scores                                   ‚îÇ
‚îÇ 3. Link para artigo completo                                 ‚îÇ
‚îÇ 4. Modal com detalhes do artigo                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üß† Componentes Detalhados

### 1. **VectorDBManager** (`services/vector_db.py`)

**Responsabilidades:**
- Gerencia conex√£o com ChromaDB
- Armazena documentos com embeddings
- Executa buscas sem√¢nticas (similarity search)
- Retorna metadados estruturados

**M√©todos Principais:**
```python
add_document_id(document, metadata, doc_id)
  ‚Üí Adiciona/atualiza documento com ID espec√≠fico

query_with_metadata(query_text, n_results)
  ‚Üí Busca sem√¢ntica retornando docs estruturados
  ‚Üí Calcula score: 1.0 - distance (normalizado 0-1)
```

**ChromaDB Collection:**
- Nome: `nasa_space_collection`
- Embedding autom√°tico via modelo configur√°vel
- M√©trica: Dist√¢ncia cosine

---

### 2. **Retriever** (`agent/retriever.py`)

**Responsabilidades:**
- Interface entre pipeline e VectorDBManager
- Singleton pattern para efici√™ncia
- Logging de opera√ß√µes

**Fluxo:**
```python
retrieve_with_metadata(question, top_k=5)
  ‚Üì
db_manager.query_with_metadata(question, top_k)
  ‚Üì
Retorna: List[Dict] com metadados completos
```

---

### 3. **AgentPipeline** (`agent/pipeline.py`)

**Responsabilidades:**
- Orquestra√ß√£o completa do RAG
- Integra√ß√£o com Google Gemini
- Constru√ß√£o de prompts
- Formata√ß√£o de respostas

**Prompts:**
```python
build_synthesis_prompt(question, docs)
  ‚Üí Template estruturado para LLM
  ‚Üí Inclui contexto e diretrizes
  
build_fallback_prompt(question)
  ‚Üí Resposta quando n√£o h√° documentos
  ‚Üí Explica limita√ß√£o educadamente
```

---

### 4. **Extra√ß√£o de Dados** (`extract/`)

#### **ncbi_fetcher.py**
- Busca artigos via NCBI E-utilities API
- Parse de XML estruturado
- Extrai: abstract, se√ß√µes, refer√™ncias

#### **extractor.py**
- Detecta tipo de conte√∫do (HTML/PDF)
- Extra√ß√£o de texto limpo
- Fallback para scraping web

#### **sectionizer.py**
- Identifica se√ß√µes de artigos cient√≠ficos
- Padr√µes: Introduction, Methods, Results, Discussion
- Estrutura hier√°rquica

---

## üìä M√©tricas e Performance

### Busca Sem√¢ntica (ChromaDB)
- **Lat√™ncia m√©dia**: ~50-100ms para top-5
- **Precis√£o**: Score > 0.8 indica alta relev√¢ncia
- **Recall**: Depende da qualidade dos embeddings

### S√≠ntese (Google Gemini)
- **Lat√™ncia**: ~1-3 segundos
- **Temperature**: 0.3 (baixa varia√ß√£o)
- **Max tokens**: 500 (respostas concisas)

### Processamento Batch
- **Velocidade**: ~5-10 artigos/minuto
- **Taxa de sucesso**: ~80% (alguns artigos sem abstract)
- **Total processado**: 490/607 artigos

---

## üîê Seguran√ßa e Configura√ß√£o

### Vari√°veis de Ambiente (`.env`)
```bash
GOOGLE_API_KEY          # Chave Google Gemini
GOOGLE_EMBED_MODEL      # Modelo de embeddings
GOOGLE_CHAT_MODEL       # Modelo de chat
REDIS_URL              # Conex√£o Redis
CORS_ORIGINS           # Origens permitidas
ENV                    # dev/prod
```

### CORS
- Configurado para localhost (desenvolvimento)
- Deve ser restrito em produ√ß√£o

### Rate Limiting
- N√£o implementado (recomendado para produ√ß√£o)
- Redis pode ser usado para isso

---

## üöÄ Fluxo de Desenvolvimento

### Setup Inicial
```bash
# 1. Backend
cd agents
python -m venv .venv
source .venv/bin/activate
pip install -e .
python proccess_batch.py  # ~30-60 min

# 2. Iniciar API
uvicorn packages.api.app.main:app --reload --port 8000

# 3. Frontend
cd ../front
npm install
npm run dev
```

### Adicionar Novos Artigos
```bash
# 1. Atualizar CSV: shared/SB_publication_PMC.csv
# 2. Rodar processamento
python proccess_batch.py
# 3. Reiniciar API (se necess√°rio)
```

---

## üìà Poss√≠veis Melhorias Futuras

### 1. **Performance**
- [ ] Cache de embeddings de perguntas comuns (Redis)
- [ ] Indexa√ß√£o mais eficiente (HNSW no ChromaDB)
- [ ] Reranking com modelo cross-encoder

### 2. **Funcionalidades**
- [ ] Hist√≥rico de conversas persistente
- [ ] Exportar respostas em PDF/Markdown
- [ ] Sugest√µes de perguntas relacionadas
- [ ] Multi-idioma

### 3. **Qualidade**
- [ ] Fine-tuning do modelo de embeddings
- [ ] Avalia√ß√£o com m√©tricas (BLEU, ROUGE)
- [ ] A/B testing de prompts
- [ ] Feedback loop do usu√°rio

### 4. **Infraestrutura**
- [ ] Containeriza√ß√£o (Docker)
- [ ] CI/CD pipeline
- [ ] Monitoramento (Prometheus/Grafana)
- [ ] Rate limiting e autentica√ß√£o

---

## üéØ Casos de Uso

1. **Pesquisadores**: Busca r√°pida em literatura cient√≠fica
2. **Estudantes**: Entendimento de conceitos de medicina espacial
3. **Profissionais**: S√≠ntese de m√∫ltiplos artigos
4. **Educa√ß√£o**: Ferramenta de aprendizado interativa

---

## üìö Refer√™ncias T√©cnicas

- **RAG Paper**: [Retrieval-Augmented Generation (Lewis et al.)](https://arxiv.org/abs/2005.11401)
- **ChromaDB**: https://docs.trychroma.com/
- **Google Gemini**: https://ai.google.dev/docs
- **FastAPI**: https://fastapi.tiangolo.com/
- **NCBI API**: https://www.ncbi.nlm.nih.gov/books/NBK25501/

---

## üë• Equipe SpaceAPSS

Desenvolvido como projeto acad√™mico/pesquisa em Intelig√™ncia Artificial aplicada √† literatura cient√≠fica espacial.

**Licen√ßa**: MIT

---

**√öltima atualiza√ß√£o**: Outubro 2025
